/**
    날짜: 2023/10/02
    이름: 이지민
    내용: 2장 데이터베이스 기본
*/

// 실습1-1.테이블 생성
CREATE TABLE USER1 (
    ID      VARCHAR2(20),
    NAME    VARCHAR2(20),
    HP      CHAR(13),
    AGE     NUMBER
);

// 실습1-2.데이터 추가
INSERT INTO USER1 VALUES('A101','김유신','010-1234-1111',25);
INSERT INTO USER1 VALUES('A102','김춘추','010-1234-2222',23);
INSERT INTO USER1 VALUES('A103','장보고','010-1234-3333',45);
INSERT INTO USER1 (id, name, age) VALUES ('A104','강감찬',45);
INSERT INTO USER1 (id, name, hp) VALUES ('A105','이순신','010-1234-5555');

// 실습1-3.데이터 조회
SELECT * FROM USER1;
SELECT * FROM USER1 WHERE id='A101';
SELECT * FROM USER1 WHERE name='김춘추';
SELECT * FROM USER1 WHERE age > 30;
SELECT id, name, age FROM USER1;

// 실습1-4.데이터 수정
UPDATE USER1 SET hp='010-1234-4444' WHERE id='A104';
UPDATE USER1 SET age=51 WHERE id='A105';
UPDATE USER1 SET hp='010-1234-1001', age=27 WHERE id='A101';

// 실습1-5.데이터 삭제
DELETE FROM User1 WHERE id='A101';
DELETE FROM User1 WHERE id='A102' AND age=25;
DELETE FROM User1 WHERE age >= 30;

// 실습2-1. 기본키 실습
CREATE TABLE USER2 (
    ID VARCHAR2(20) PRIMARY KEY,
    NAME VARCHAR2(20),
    HP CHAR(13) UNIQUE,
    AGE NUMBER(3)
);

// 실습2-2. 고유키 실습
CREATE TABLE USER3 (
    ID      VARCHAR2(20) PRIMARY KEY,
    NAME    VARCHAR2(20),
    HP      CHAR(13) UNIQUE,
    AGE     NUMBER(2)
);

// 실습2-3 외래키
CREATE TABLE PARENT(
    PID     VARCHAR2(20) PRIMARY KEY,
    NAME    VARCHAR2(20),
    HP      CHAR(13) UNIQUE
);

CREATE TABLE CHILD (
    CID     VARCHAR2(20) PRIMARY KEY,
    NAME    VARCHAR2(20),
    HP      CHAR(13) UNIQUE,
    PARENT  VARCHAR(20),
    FOREIGN KEY (PARENT) REFERENCES PARENT (PID)
);
INSERT INTO PARENT VALUES('P101','김서현','010-1234-1001');
INSERT INTO PARENT VALUES ('P102','이성계','010-1234-1002');
INSERT INTO PARENT VALUES ('P103','신사임당','010-1234-1003');

INSERT INTO CHILD VALUES ('C101','김유신','010-1234-2001','P101');
INSERT INTO CHILD VALUES ('C102','이방우','010-1234-2002','P102');
INSERT INTO CHILD VALUES ('C103','이방원','010-1234-2003','P102');
INSERT INTO CHILD VALUES ('C104','이이','010-1234-2004','P103');

// 실습 2-4. DEFAULT와 NOT NULL 실습
CREATE TABLE USER4(
    NAME VARCHAR(20) NOT NULL,
    GENDER CHAR(1) NOT NULL,
    AGE INT DEFAULT 1,
    ADDR VARCHAR2(255)
);

INSERT INTO USER4 VALUES ('김유신','M',23,'김해시');
INSERT INTO USER4 VALUES ('김춘추','M',21,'경주시');
INSERT INTO USER4 (NAME, GENDER, ADDR) VALUES ('신사임당','F','강릉시');
INSERT INTO USER4 (NAME, GENDER) VALUES ('이순신','M');
INSERT INTO USER4 (NAME, GENDER, AGE) VALUES ('정약용','M',33);

// 실습 2-5. CHECK 제약조건 실습
CREATE TABLE USER5 (
    NAME VARCHAR2(20) NOT NULL,
    GENDER CHAR(1) NOT NULL CHECK(GENDER IN('M','F')),
    AGE INT DEFAULT 1 CHECK(AGE > 0 AND AGE < 100),
    ADDR VARCHAR2(255)
);

INSERT INTO USER5 VALUES ('김유신','M',23,'김해시');
INSERT INTO USER5 VALUES ('김춘추','M',21,'경주시');
INSERT INTO USER5 (NAME, GENDER, ADDR) VALUES ('신사임당','F','강릉시');
INSERT INTO USER5 (NAME, GENDER) VALUES ('이순신','M');
INSERT INTO USER5 (NAME, GENDER, AGE) VALUES ('정약용','M',33);

-- ...

// 실습 4-1. 사용자 생성
-- 사용자 생성
ALTER SESSION SET "_ORACLE_SCRIPT"=true;